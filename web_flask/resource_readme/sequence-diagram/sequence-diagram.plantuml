@startuml
actor Пользователь
participant "Веб-приложение" as Web
participant "Служба аутентификации" as Auth
participant "Служба игр" as Game
participant "Служба уведомлений" as Notify
database "База данных пользователей" as UserDB
database "База данных игр" as GameDB
queue "Очередь сообщений" as MQ
participant "Служба электронной почты" as Email

== Поток веб сайта ==
Пользователь -> Web: Заходит на сайт
Web --> Страница: Отображение страницы

Пользователь -> Web: Нажимает на кнопку "Загрузить игру" 
Web -> Game: Проверка доступности игры
Game --> Web: Ссылка на загрузку
Web --> Пользователь: Загрузка игры

== Поток загрузки игры ==
Пользователь -> Web: Запрос на копию игры
Web -> Game: Проверка доступности игры
Game -> GameDB: Проверка статуса игры
GameDB --> Game: Детали игры
Game -> UserDB: Проверка прав пользователя
UserDB --> Game: Статус пользователя
Game --> Web: Ссылка на загрузку
Web --> Пользователь: Загрузка игры начата

== Поток уведомлений ==
Game -> MQ: Публикация события загрузки
MQ -> Notify: Обработка события
Notify -> Email: Генерация электронной почты
Email -> Пользователь: Отправка подтверждения загрузки

@enduml